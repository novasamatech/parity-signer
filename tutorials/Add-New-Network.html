<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Add New Network - Polkadot-Vault</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> About Polkadot Vault</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../about/FAQ.html"><strong aria-hidden="true">1.1.</strong> FAQ</a></li><li class="chapter-item expanded "><a href="../about/Security-And-Privacy.html"><strong aria-hidden="true">1.2.</strong> Security-And-Privacy</a></li><li class="chapter-item expanded "><a href="../tutorials/Hierarchical-Deterministic-Key-Derivation.html"><strong aria-hidden="true">1.3.</strong> Hierarchical-Deterministic-Key-Derivation</a></li><li class="chapter-item expanded "><a href="../about/Changelog.html"><strong aria-hidden="true">1.4.</strong> Changelog</a></li></ol></li><li class="chapter-item expanded "><a href="../tutorials/SUMMARY.html"><strong aria-hidden="true">2.</strong> User Guides</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tutorials/Start.html"><strong aria-hidden="true">2.1.</strong> Start</a></li><li class="chapter-item expanded "><a href="../tutorials/Upgrading.html"><strong aria-hidden="true">2.2.</strong> Upgrading</a></li><li class="chapter-item expanded "><a href="../tutorials/Add-New-Network.html" class="active"><strong aria-hidden="true">2.3.</strong> Add New Network</a></li><li class="chapter-item expanded "><a href="../tutorials/Kusama-tutorial.html"><strong aria-hidden="true">2.4.</strong> Kusama-tutorial</a></li><li class="chapter-item expanded "><a href="../tutorials/Recover-Account-Polkadotjs.html"><strong aria-hidden="true">2.5.</strong> Recover-Account-Polkadotjs</a></li></ol></li><li class="chapter-item expanded "><a href="../development/Development.html"><strong aria-hidden="true">3.</strong> Development</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../development/Build.html"><strong aria-hidden="true">3.1.</strong> Build</a></li><li class="chapter-item expanded "><a href="../development/Vault-Structure.html"><strong aria-hidden="true">3.2.</strong> Vault structure</a></li><li class="chapter-item expanded "><a href="../development/Troubleshooting.html"><strong aria-hidden="true">3.3.</strong> Troubleshooting</a></li><li class="chapter-item expanded "><a href="../development/Rustdocs.html"><strong aria-hidden="true">3.4.</strong> Rust docs</a></li><li class="chapter-item expanded "><a href="../development/UOS.html"><strong aria-hidden="true">3.5.</strong> Universal offline signature</a></li><li class="chapter-item expanded "><a href="../development/Ecosystem.html"><strong aria-hidden="true">3.6.</strong> Vault ecosystem</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Polkadot-Vault</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="add-new-network"><a class="header" href="#add-new-network">Add New Network</a></h1>
<p>Polkadot Vault supports adding any substrate-based networks or updating an existing network via QR code.</p>
<p>After you've installed <a href="#Prerequisites">required software</a>, you need to add <em>Network's Specs</em> to Vault and add <em>Network Metadata</em> for this network, so that Vault is able to decode, and you could read and verify transactions you are signing on this network.</p>
<p>If you need to update metadata for already existing network you only need to update <em>Network Metadata</em>.
Off-the-shelf Vault comes with networks that you can update by scanning a multipart QR codes that contain recent metadata for these networks at <a href="https://metadata.parity.io/">Metadata Update Portal</a>.</p>
<p><em>Network Specs</em></p>
<ol>
<li><a href="#get-network-spec">Get</a></li>
<li><a href="#sign-network-spec">Sign</a></li>
<li><a href="#feed-network-spec-into-signer">Feed into Vault</a></li>
</ol>
<p><em>Network Metadata</em></p>
<ol start="4">
<li><a href="#get-network-metadata">Get</a></li>
<li><a href="#sign-network-metadata">Sign</a></li>
<li><a href="#feed-network-metadata-into-signer">Feed into Vault</a></li>
</ol>
<h3 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h3>
<ul>
<li><input disabled="" type="checkbox"/>
Network details
<ul>
<li><input disabled="" type="checkbox"/>
RPC endpoint (websocket URL)<br />
<em>Hint: You can RPC endpoints for some of the public networks e.g. in <a href="https://github.com/polkadot-js/apps/tree/master/packages/apps-config/src/endpoints">polkadot-js/apps repository</a></em></li>
<li><input disabled="" type="checkbox"/>
Encryption algorithm</li>
</ul>
</li>
<li><input disabled="" type="checkbox"/>
<a href="https://www.rust-lang.org/tools/install">rust</a></li>
<li><input disabled="" type="checkbox"/>
a clone of <a href="https://github.com/paritytech/parity-signer">parity-signer repository</a></li>
<li><input disabled="" type="checkbox"/>
<a href="https://docs.substrate.io/v3/tools/subkey/#installation">subkey</a></li>
<li><input disabled="" type="checkbox"/>
Dedicated keypair specifically for signing updates<br />
<em>Please make sure you have a backup <code>&lt;secret-phrase&gt;</code> and <code>Public key (hex)</code> of this keypair. You will be able to update a network only with metadata that is signed with the same keypair as network specs. You can generate it with any tool of your choice, e.g with <a href="https://docs.substrate.io/v3/tools/subkey/#installation">subkey</a>:</em> <code>subkey generate</code>.</li>
</ul>
<!-- "TODO suggested strategy to handle this keypair: password 
derivation, dedicated signer -->
<br/>
<hr />
<br/>
<p>Let's get started!</p>
<h2 id="add-network-specs"><a class="header" href="#add-network-specs">Add Network Specs</a></h2>
<h3 id="get-network-specs"><a class="header" href="#get-network-specs">Get Network Specs</a></h3>
<p>In <code>parity-signer/rust/generate_message</code></p>
<pre><code>cargo run add-specs -u &lt;network-ws-url&gt; --encryption &lt;crypto&gt;

</code></pre>
<pre><code>// e.g.
cargo run add-specs -u wss://statemint-rpc.polkadot.io --encryption sr25519

</code></pre>
<p>For networks supporting several tokens:</p>
<pre><code>cargo run add-specs -d -u &lt;network-ws-url&gt; --encryption &lt;crypto&gt; --token-decimals &lt;decimals&gt; --token-unit &lt;SYMBOL&gt;

</code></pre>
<pre><code>// e.g.
cargo run add-specs -d -u wss://karura-rpc-0.aca-api.network --encryption sr25519 --token-decimals 12 --token-unit KAR

</code></pre>
<br/>
<p>Now your <code>&lt;specs-file&gt;</code> is in <code>parity-signer/rust/files/for_signing</code>.</p>
<p><em>Hint: you can read more about <a href="https://github.com/paritytech/parity-signer/blob/master/rust/generate_message/src/lib.rs">interface with hot database</a> if you want to maintain it.</em></p>
<!-- TODO more about hot database, suggested use of hot database" -->
<h3 id="sign-network-spec"><a class="header" href="#sign-network-spec">Sign Network Spec</a></h3>
<h4 id="get-signature"><a class="header" href="#get-signature">Get signature</a></h4>
<p>In <code>parity-signer/rust/files/for_signing</code></p>
<pre><code>cat &lt;spec-file&gt; | subkey sign --suri &lt;seed-phrase-and-derivation&gt;
</code></pre>
<pre><code>// e.g.
cat sign_me_add_specs_statemint_sr25519 | subkey sign --suri &quot;bottom drive obey lake curtain smoke basket hold race lonely fit walk//Alice&quot;
</code></pre>
<p>This will return a <code>&lt;signature&gt;</code> you need to make a signed QR.</p>
<h4 id="make-signed-qr"><a class="header" href="#make-signed-qr">Make signed QR</a></h4>
<p>In <code>parity-signer/rust/generate_message</code></p>
<pre><code>cargo run --release make --goal qr --crypto &lt;crypto&gt; --msg add-specs --payload &lt;spec-file&gt; --verifier-hex &lt;public-key&gt; --signature-hex &lt;signature&gt;
</code></pre>
<pre><code>// e.g.
cargo run --release make --goal qr --crypto sr25519 --msg add-specs --payload sign_me_add_specs_statemint_sr25519 --verifier-hex 0x927c307614dba6ec42f84411cc1e93c6579893859ce5a7ac3d8c2fb1649d1542 --signature-hex fa3ed5e1156d3d51349cd9bb4257387d8e32d49861c0952eaff1c2d982332e13afa8856bb6dfc684263aa3570499e067d4d78ea2dfa7a9b85e8ea273d3a81a86
</code></pre>
<br/>
<p>Now your <code>&lt;spec-qr&gt;</code> is in <code>parity-signer/rust/files/signed</code></p>
<h3 id="feed-network-specs-into-vault"><a class="header" href="#feed-network-specs-into-vault">Feed Network Specs into Vault</a></h3>
<p>In Vault open scanner, scan your <code>&lt;spec-qr&gt;</code> and approve chain specs.</p>
<br/>
<h2 id="add-network-metadata"><a class="header" href="#add-network-metadata">Add Network Metadata</a></h2>
<h3 id="get-network-metadata"><a class="header" href="#get-network-metadata">Get Network Metadata</a></h3>
<p>In <code>parity-signer/rust/generate_message</code></p>
<pre><code>cargo run load-metadata -d -u `&lt;network-ws-url&gt;`
</code></pre>
<pre><code>// e.g.
cargo run load-metadata -d -u wss://statemint-rpc.polkadot.io
</code></pre>
<br/>
<p>This will fetch fresh <code>&lt;metadata_file&gt;</code>, update the database with it, and - most relevant to us currently - generate file with message body in <code>parity-signer/rust/files/for_signing</code>.</p>
<h3 id="sign-network-metadata"><a class="header" href="#sign-network-metadata">Sign Network Metadata</a></h3>
<h4 id="get-signature-1"><a class="header" href="#get-signature-1">Get Signature</a></h4>
<p>In <code>parity-signer/rust/files/for_signing</code></p>
<pre><code>cat &lt;metadata-file&gt; | subkey sign --suri &lt;seed-phrase-and-derivation&gt;
</code></pre>
<pre><code>// e.g.
cat sign_me_load_metadata_statemintV800 | subkey sign --suri &quot;bottom drive obey lake curtain smoke basket hold race lonely fit walk//Alice&quot;
</code></pre>
<h4 id="make-signed-qr-1"><a class="header" href="#make-signed-qr-1">Make signed QR</a></h4>
<p>In <code>parity-signer/rust/generate_message</code></p>
<pre><code>cargo run --release make --goal qr --crypto &lt;crypto&gt; --msg load-metadata --payload &lt;metadata-file&gt; --verifier-hex &lt;public-key&gt; --signature-hex &lt;signature&gt;
</code></pre>
<pre><code>// e.g.
cargo run --release make --goal qr --crypto sr25519 --msg load-metadata --payload sign_me_load-metadata_statemintV800 --verifier-hex 0x927c307614dba6ec42f84411cc1e93c6579893859ce5a7ac3d8c2fb1649d1542 --signature-hex 6a8f8dab854bec99bd8534102a964a4e71f4370683e7ff116c84d7e8d5cb344efd3b90d27059b7c8058f5c4a5230b792009c351a16c007237921bcae2ede2d84
</code></pre>
<p>This QR might take some time to be generated. After it is finished you can find your <code>&lt;metadata-qr&gt;</code> in <code>parity-signer/rust/files/signed</code>. It is a multipart QR-&quot;movie&quot;, if your image viewer does not render it correctly, we suggest to open it in a browser.</p>
<h3 id="feed-network-metadata-into-vault"><a class="header" href="#feed-network-metadata-into-vault">Feed Network Metadata into Vault</a></h3>
<p>In Vault open scanner, scan your <code>&lt;metadata-qr&gt;</code> and accept new metadata.</p>
<br/>
<hr />
<br/>
<p>Congratulations! You've fetched network specs, signed them, fed them into Vault, fetched recent metadata for the network, signed and fed it into Vault as well. Now you are ready to safely sign transactions on this network.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../tutorials/Upgrading.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../tutorials/Kusama-tutorial.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../tutorials/Upgrading.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../tutorials/Kusama-tutorial.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../editor.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>


    </div>
    </body>
</html>
