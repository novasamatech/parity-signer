<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Making and restoring cold database with default content"><title>db_handling::cold_default - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-fa3bb1812debf86c.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="db_handling" data-themes="" data-resource-suffix="" data-rustdoc-version="1.74.0 (79e9716c9 2023-11-13)" data-channel="1.74.0" data-search-js="search-8be46b629f5f14a8.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="../../static.files/main-c5bd66d33317d69f.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../db_handling/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a></nav><nav class="sidebar"><a class="logo-container" href="../../db_handling/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module cold_default</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">db_handling</a>::<wbr><a class="mod" href="#">cold_default</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/db_handling/cold_default.rs.html#1-305">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Making and restoring <strong>cold</strong> database with default content</p>
<p>Cold database is the database that is operated from inside the Vault.</p>
<p>Cold database contains following trees:</p>
<ul>
<li><code>ADDRTREE</code> with public addresses data</li>
<li><code>HISTORY</code> with Vault history log</li>
<li><code>METATREE</code> with network metadata</li>
<li><code>SETTREE</code> with settings: types information, Vault dangerous exposures
record and Vault database general verifier</li>
<li><code>SPECSTREE</code> with network specs</li>
<li><code>TRANSACTION</code> for temporary storage of the transaction data</li>
<li><code>VERIFIERS</code> with network verifiers data</li>
</ul>
<p>For release, the cold database is generated on the hot side and then copied
verbatim into Vault files during the build.</p>
<p>Before the database could be used, it must be initiated:</p>
<ul>
<li>History log old entries (if any are present) are removed and a new entry
<code>Event::DatabaseInitiated</code> is added</li>
<li>General verifier is set and this event is recorded in the history log. By
default, Vault sets up Parity-associated key as a general verifier. This
could be later on changed by the user.</li>
</ul>
<p>Vault then reads and updates the database as it operates.</p>
<p>There are two ways to reset the database from the Vault user interface.
Either would remove all the keys and restore the database to the release
state. The difference would be only in the general verifier setting:</p>
<ul>
<li><code>Wipe all data</code> would set the general verifier to default <code>Some(_)</code>,
with Parity-associated key inside</li>
<li><code>Remove general certificate</code> would set the general verifier to <code>None</code>.
User would then be able to set up own general verifier, preferably
immediately afterwards, by loading to Vault any verified data.
Setting up a new general verifier would remove all data associated with the
general verifier from the Vault database to avoid confusion as to who
verified what information.</li>
</ul>
</div></details><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.init_db.html" title="fn db_handling::cold_default::init_db">init_db</a></div><div class="desc docblock-short">Initiate cold database and set up the database general verifier to given
<a href="../../definitions/network_specs/struct.Verifier.html" title="struct definitions::network_specs::Verifier"><code>Verifier</code></a>.</div></li><li><div class="item-name"><a class="fn" href="fn.populate_cold.html" title="fn db_handling::cold_default::populate_cold">populate_cold</a></div><div class="desc docblock-short">Generate initiated test cold database with default content, and create in it
Alice default addresses.</div></li><li><div class="item-name"><a class="fn" href="fn.populate_cold_nav_test.html" title="fn db_handling::cold_default::populate_cold_nav_test">populate_cold_nav_test</a></div><div class="desc docblock-short">Generate <strong>not initiated</strong> test cold database for <code>navigator</code> testing.</div></li><li><div class="item-name"><a class="fn" href="fn.populate_cold_no_metadata.html" title="fn db_handling::cold_default::populate_cold_no_metadata">populate_cold_no_metadata</a></div><div class="desc docblock-short">Generate initiated test cold database without network metadata.</div></li><li><div class="item-name"><a class="fn" href="fn.populate_cold_no_networks.html" title="fn db_handling::cold_default::populate_cold_no_networks">populate_cold_no_networks</a></div><div class="desc docblock-short">Generate initiated test cold database with no network-associated data.</div></li><li><div class="item-name"><a class="fn" href="fn.signer_init_no_cert.html" title="fn db_handling::cold_default::signer_init_no_cert">signer_init_no_cert</a></div><div class="desc docblock-short">Initiate Vault database with general verifier set up to <code>Verifier(None)</code>.</div></li><li><div class="item-name"><a class="fn" href="fn.signer_init_with_cert.html" title="fn db_handling::cold_default::signer_init_with_cert">signer_init_with_cert</a></div><div class="desc docblock-short">Initiate Vault database with default general verifier (Parity-associated
key).</div></li></ul></section></div></main></body></html>