#[cfg(test)]
mod tests {

    use crate::{do_action, init_navigation};
    
    use db_handling::cold_default::{populate_cold_release, signer_init};
    use definitions::network_specs::{Verifier, VerifierValue};
    use lazy_static::lazy_static;
    use regex::Regex;
    use sp_core;
    use sp_runtime::MultiSigner;
    use std::fs;
    
    const ALICE: [u8; 32] = [212, 53, 147, 199, 21, 253, 211, 28, 97, 20, 26, 189, 4, 169, 159, 214, 130, 44, 133, 88, 133, 76, 205, 227, 154, 86, 132, 231, 165, 109, 162, 125];
    
    fn verifier_alice_sr25519() -> Verifier {
        Verifier(Some(VerifierValue::Standard(MultiSigner::Sr25519(sp_core::sr25519::Public::from_raw(ALICE)))))
    }
/*    
    fn verifier_alice_ed25519() -> Verifier {
        Verifier(Some(VerifierValue::Standard(MultiSigner::Ed25519(sp_core::ed25519::Public::from_raw(ALICE)))))
    }
*/    
    
    lazy_static! {
        static ref NO_TIME: Regex = Regex::new(r#""timestamp":".*?""#).expect("checked construction");
        static ref NO_CHECKSUM: Regex = Regex::new(r#""checksum":"[0-9A-F]*?""#).expect("checked construction");
    }
    
    fn timeless(current_real_json: &str) -> String {
        NO_TIME.replace_all(&current_real_json, r#""timestamp":"**""#).to_string()
    }
    fn cut_checksum(current_real_json: &str) -> String {
        NO_CHECKSUM.replace_all(&current_real_json, r#""checksum":"**""#).to_string()
    }
    
    #[test]
    fn flow_test_1() {
        let dbname = "for_tests/flow_test_1";
        populate_cold_release(dbname).unwrap();
        signer_init(dbname, verifier_alice_sr25519()).unwrap();
        init_navigation(dbname, "");
        
        let real_json = do_action("Start","","");
        let expected_json = r#"{"screen":"SeedSelector","screenLabel":"Select seed","back":false,"footer":true,"footerButton":"Keys","rightButton":"NewSeed","screenNameType":"h1","modal":"NewSeedMenu","alert":"Empty","screenData":{"seedNameCards":[]},"modalData":{},"alertData":{}}"#;
        assert!(real_json == expected_json, "Initiated with no keys. Started. Expected SeedSelector screen with no modals, got:\n{}", real_json);
        
        let real_json = do_action("NavbarLog","","");
        let cut_real_json = timeless(&real_json);
        let expected_json = r#"{"screen":"Log","screenLabel":"","back":false,"footer":true,"footerButton":"Log","rightButton":"LogRight","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"log":[{"order":0,"timestamp":"**","events":[{"event":"database_initiated"},{"event":"general_verifier_added","payload":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"}}]}],"total_entries":1},"modalData":{},"alertData":{}}"#;
        assert!(cut_real_json == expected_json, "Switched to Log from empty SeedSelector. Expected Log screen with no modals, got:\n{}", real_json);
        
        let mut current_log_json = real_json;
        
        let real_json = do_action("GoBack","","");
        assert!(current_log_json == real_json, "GoBack on Log screen with no modals. Expected to remain where was, got:\n{}", real_json);
        let real_json = do_action("GoForward","","");
        assert!(current_log_json == real_json, "GoForward on Log screen with no modals. Expected to remain where was, got:\n{}", real_json);
        
        let real_json = do_action("RightButton","","");
        let cut_real_json = cut_checksum(&timeless(&real_json));
        let expected_json = r#"{"screen":"Log","screenLabel":"","back":false,"footer":true,"footerButton":"Log","rightButton":"LogRight","screenNameType":"h4","modal":"LogRight","alert":"Empty","screenData":{"log":[{"order":0,"timestamp":"**","events":[{"event":"database_initiated"},{"event":"general_verifier_added","payload":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"}}]}],"total_entries":1},"modalData":{"checksum":"**"},"alertData":{}}"#;
        assert!(cut_real_json == expected_json, "RightButton on Log screen with no modals. Expected same Log screen with LogRight modal, got:\n{}", cut_real_json);
        let real_json = do_action("GoBack","","");
        assert!(current_log_json == real_json, "GoBack on Log screen with LogRight modal. Expected to get Log screen with no modals, got:\n{}", real_json);
        
        do_action("RightButton","","");
        let real_json = do_action("CreateLogComment","","");
        let cut_real_json = timeless(&real_json);
        let expected_json = r#"{"screen":"Log","screenLabel":"","back":false,"footer":true,"footerButton":"Log","rightButton":"LogRight","screenNameType":"h4","modal":"LogComment","alert":"Empty","screenData":{"log":[{"order":0,"timestamp":"**","events":[{"event":"database_initiated"},{"event":"general_verifier_added","payload":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"}}]}],"total_entries":1},"modalData":{},"alertData":{}}"#;
        assert!(cut_real_json == expected_json, "CreateLogComment on Log screen with LogRight modal. Expected same Log screen with LogComment modal, got:\n{}", cut_real_json);
        let real_json = do_action("GoBack","","");
        assert!(current_log_json == real_json, "GoBack on Log screen with LogComment modal. Expected same Log screen with no modals, got:\n{}", real_json);
        
        do_action("RightButton","","");
        do_action("CreateLogComment","","");
        let real_json = do_action("GoForward","Remember this moment","");
        let cut_real_json = timeless(&real_json);
        let expected_json = r#"{"screen":"Log","screenLabel":"","back":false,"footer":true,"footerButton":"Log","rightButton":"LogRight","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"log":[{"order":1,"timestamp":"**","events":[{"event":"user_entered_event","payload":"Remember this moment"}]},{"order":0,"timestamp":"**","events":[{"event":"database_initiated"},{"event":"general_verifier_added","payload":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"}}]}],"total_entries":2},"modalData":{},"alertData":{}}"#;
        assert!(cut_real_json == expected_json, "GoForward on Log screen with LogComment modal. Expected updated Log screen with no modals, got:\n{}", real_json);
        
        let real_json = do_action("Shield","","");
        let cut_real_json = timeless(&real_json);
        let expected_json = r#"{"screen":"Log","screenLabel":"","back":false,"footer":true,"footerButton":"Log","rightButton":"LogRight","screenNameType":"h4","modal":"Empty","alert":"Shield","screenData":{"log":[{"order":1,"timestamp":"**","events":[{"event":"user_entered_event","payload":"Remember this moment"}]},{"order":0,"timestamp":"**","events":[{"event":"database_initiated"},{"event":"general_verifier_added","payload":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"}}]}],"total_entries":2},"modalData":{},"alertData":{"shield_state":"unknown"}}"#;
        assert!(cut_real_json == expected_json, "Shield on Log screen with no modal. Expected same Log screen with Shield alert, got:\n{}", real_json);
        
        do_action("RightButton","","");
        let real_json = do_action("ClearLog","","");
        let cut_real_json = timeless(&real_json);
        let expected_json = r#"{"screen":"Log","screenLabel":"","back":false,"footer":true,"footerButton":"Log","rightButton":"LogRight","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"log":[{"order":0,"timestamp":"**","events":[{"event":"history_cleared"}]}],"total_entries":1},"modalData":{},"alertData":{}}"#;
        assert!(cut_real_json == expected_json, "ClearLog on Log screen with LogRight modal. Expected updated Log screen with no modals, got:\n{}", real_json);
        
        let real_json = do_action("NavbarSettings","","");
        let expected_json = r#"{"screen":"Settings","screenLabel":"","back":false,"footer":true,"footerButton":"Settings","rightButton":"None","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"},"modalData":{},"alertData":{}}"#;
        assert!(real_json == expected_json, "NavbarSettings on Log screen. Expected Settings screen with no modals, got:\n{}", real_json);
        
        let current_settings_json = real_json;
        
        let real_json = do_action("BackupSeed","","");
        let expected_json = r#"{"screen":"SelectSeedForBackup","screenLabel":"Select seed","back":true,"footer":false,"footerButton":"Settings","rightButton":"Backup","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"seedNameCards":[]},"modalData":{},"alertData":{}}"#;
        assert!(real_json == expected_json, "BackupSeed on Settings screen. Expected SelectSeedForBackup screen with no modals, got:\n{}", real_json);
        
        let real_json = do_action("GoBack","","");
        assert!(real_json == current_settings_json, "GoBack on SelectSeedForBackup screen with no seeds available. Expected Settings screen with no modals, got:\n{}", real_json);
        
        let real_json = do_action("ViewGeneralVerifier","","");
        let expected_json = r#"{"screen":"Verifier","screenLabel":"VERIFIER CERTIFICATE","back":true,"footer":false,"footerButton":"Settings","rightButton":"None","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"},"modalData":{},"alertData":{}}"#;
        assert!(real_json == expected_json, "ViewGeneralVerifier on Settings screen. Expected Verifier screen with no modals, got:\n{}", real_json);
        
        let real_json = do_action("GoBack","","");
        assert!(real_json == current_settings_json, "GoBack on Verifier screen. Expected Settings screen with no modals, got:\n{}", real_json);
        
        let real_json = do_action("ShowDocuments","","");
        let expected_json = r#"{"screen":"Documents","screenLabel":"Documents","back":true,"footer":false,"footerButton":"Settings","rightButton":"None","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{},"modalData":{},"alertData":{}}"#;
        assert!(real_json == expected_json, "ShowDocuments on Settings screen. Expected Documents screen with no modals, got:\n{}", real_json);
        
        let real_json = do_action("GoBack","","");
        assert!(real_json == current_settings_json, "GoBack on Documents screen. Expected Settings screen with no modals, got:\n{}", real_json);
        
        let real_json = do_action("ManageNetworks","","");
        let expected_json = r#"{"screen":"ManageNetworks","screenLabel":"MANAGE NETWORKS","back":true,"footer":false,"footerButton":"Settings","rightButton":"TypesInfo","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"networks":[{"key":"018091b171bb158e2d3848fa23a9f1c25182fb8e20313b2c1eb49219da7a70ce90c3","title":"Polkadot","logo":"polkadot","order":0},{"key":"0180b0a8d493285c2df73290dfb7e61f870f17b41801197a149ca93654499ea3dafe","title":"Kusama","logo":"kusama","order":1},{"key":"0180e143f23803ac50e8f6f8e62695d1ce9e4e1d68aa36c1cd2cfd15340213f3423e","title":"Westend","logo":"westend","order":2}]},"modalData":{},"alertData":{}}"#;
        assert!(real_json == expected_json, "ManageNetworks on Settings screen. Expected ManageNetworks screen with no modals, got:\n{}", real_json);
        
        let manage_networks_json = real_json;
        
        let real_json = do_action("GoBack","","");
        assert!(real_json == current_settings_json, "GoBack on ManageNetworks screen. Expected Settings screen with no modals, got:\n{}", real_json);
        
        do_action("ManageNetworks","","");
        let real_json = do_action("GoForward","0180b0a8d493285c2df73290dfb7e61f870f17b41801197a149ca93654499ea3dafe","");
        let expected_json = r##"{"screen":"NetworkDetails","screenLabel":"Network details","back":true,"footer":false,"footerButton":"Settings","rightButton":"NDMenu","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"base58prefix":"2","color":"#000","decimals":"12","encryption":"sr25519","genesis_hash":"b0a8d493285c2df73290dfb7e61f870f17b41801197a149ca93654499ea3dafe","logo":"kusama","name":"kusama","order":"1","path_id":"//kusama","secondary_color":"#262626","title":"Kusama","unit":"KSM","current_verifier":{"type":"general","details":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"}},"meta":[{"spec_version":"9130","meta_hash":"3e6bf025743e5cc550883170d91c8275fb238762b214922b41d64f9feba23987","meta_id_pic":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000035849444154789cedd9bd6d1b411086612a634ac080020706dc8155863b50038c5c8e2336a00e5c86dc8101070e041860ca8cde0fe408bbe7b9f966f6e74041f706ab6c67f6890ee2ddf97cdebcf71641381e8fd54376bbdd5dfa33b421082d8f668d40e98a30f2f1d37a627441a879fcf6f0339d65a7fd9774c6ea81d18450f378a401483510a805a31a610480b4344415422d001a89806a2042082d8f97462348110c37420f00b41402f242b81042000fdfd231e9f97b3a2e45110edb5fe92cdb9f3ea7d3970782223403484e080620f584e88760014804c20b2079219a10dc002888c0ea89802c8859841000ba71043407a1228401d01b40401a841be1d3fd633acb7ebf3ca5f35a10e1f0639bceb2fdd7533a2f4511e87ed75c085e00a91864411000c90bc100a462bf6b53088a600d908a411a84134062105e00a9d82f65224c0150cd10ab2802ab76bf1c624548bd226800a876c85cb7828004a23bc2fde3c77496bd3cfd49e7a52802bb2fba5f9e1b015983f201dac252beb805c100a4fc3eef7ed34208481b940fb01696f2c535082f8094dfc7f6d32a101880a7e8d2acdef7cd05881561450822b02fb7e8d20f9bbfe92c7bde7c48e7a5e87dec4b752e378206207921f2853500c90b91dfa7024804c2856001480c225fd8029018447e9f092019104310585104da8a905a1152b788c0be04a308ecbe45109005c100a47c710b820148f97d26840180dc084883f00248f9e21a841740caef532108000a21b0c24b937adf37d78a905a1152af088841d0df0e834bb32fc1e87d6c3f2d00a43f97ff27200b411b20e583acc5f3853500c90b91dfe7dd6f9a1bc11a20e583b4c5f3852d008941e4f745f7cb1b86c08a22b05af6fb0f0169102d43b46e054100d08a902a10d014223c847cb94511d8976a78bf540e802802b20615033400c909c100242f44b1df358a80bc10c5000b4022105e00894114fb5d9b022037022d88c08a22787323a030c41b40d000d02c020a41dc38c21c003211901b2288c07e3bec896001a07e08c88220009217c20b809a11503384134062103d01900b0185208ca2082d7900901b01f580580ac10b804208520bc66884c8e3a52a04540b3112a106005523a011104b03a02604a9064383a8016879bcd40541aac1a8adc7e3a5ae08d2488c9e8f9786204c6b4119f1e8698b20dc7aff00cc189bac66f79f370000000049454e44ae426082"}]},"modalData":{},"alertData":{}}"##;
        assert!(real_json == expected_json, "GoForward on ManageNetworks screen with kusama sr25519 key. Expected NetworkDetails screen for kusama with no modals, got:\n{}", real_json);
        
        let mut kusama_json = real_json;
        
        let real_json = do_action("GoBack","","");
        assert!(real_json == manage_networks_json, "GoBack on NetworkDetails screen. Expected ManageNetworks screen with no modals, got:\n{}", real_json);
        
        do_action("GoForward","0180b0a8d493285c2df73290dfb7e61f870f17b41801197a149ca93654499ea3dafe","");
        let real_json = do_action("ManageMetadata","9130","");
        let expected_json = r##"{"screen":"NetworkDetails","screenLabel":"Network details","back":true,"footer":false,"footerButton":"Settings","rightButton":"NDMenu","screenNameType":"h4","modal":"ManageMetadata","alert":"Empty","screenData":{"base58prefix":"2","color":"#000","decimals":"12","encryption":"sr25519","genesis_hash":"b0a8d493285c2df73290dfb7e61f870f17b41801197a149ca93654499ea3dafe","logo":"kusama","name":"kusama","order":"1","path_id":"//kusama","secondary_color":"#262626","title":"Kusama","unit":"KSM","current_verifier":{"type":"general","details":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"}},"meta":[{"spec_version":"9130","meta_hash":"3e6bf025743e5cc550883170d91c8275fb238762b214922b41d64f9feba23987","meta_id_pic":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000035849444154789cedd9bd6d1b411086612a634ac080020706dc8155863b50038c5c8e2336a00e5c86dc8101070e041860ca8cde0fe408bbe7b9f966f6e74041f706ab6c67f6890ee2ddf97cdebcf71641381e8fd54376bbdd5dfa33b421082d8f668d40e98a30f2f1d37a627441a879fcf6f0339d65a7fd9774c6ea81d18450f378a401483510a805a31a610480b4344415422d001a89806a2042082d8f97462348110c37420f00b41402f242b81042000fdfd231e9f97b3a2e45110edb5fe92cdb9f3ea7d3970782223403484e080620f584e88760014804c20b2079219a10dc002888c0ea89802c8859841000ba71043407a1228401d01b40401a841be1d3fd633acb7ebf3ca5f35a10e1f0639bceb2fdd7533a2f4511e87ed75c085e00a91864411000c90bc100a462bf6b53088a600d908a411a84134062105e00a9d82f65224c0150cd10ab2802ab76bf1c624548bd226800a876c85cb7828004a23bc2fde3c77496bd3cfd49e7a52802bb2fba5f9e1b015983f201dac252beb805c100a4fc3eef7ed34208481b940fb01696f2c535082f8094dfc7f6d32a101880a7e8d2acdef7cd05881561450822b02fb7e8d20f9bbfe92c7bde7c48e7a5e87dec4b752e378206207921f2853500c90b91dfa7024804c2856001480c225fd8029018447e9f092019104310585104da8a905a1152b788c0be04a308ecbe45109005c100a47c710b820148f97d26840180dc084883f00248f9e21a841740caef532108000a21b0c24b937adf37d78a905a1152af088841d0df0e834bb32fc1e87d6c3f2d00a43f97ff27200b411b20e583acc5f3853500c90b91dfe7dd6f9a1bc11a20e583b4c5f3852d008941e4f745f7cb1b86c08a22b05af6fb0f0169102d43b46e054100d08a902a10d014223c847cb94511d8976a78bf540e802802b20615033400c909c100242f44b1df358a80bc10c5000b4022105e00894114fb5d9b022037022d88c08a22787323a030c41b40d000d02c020a41dc38c21c003211901b2288c07e3bec896001a07e08c88220009217c20b809a11503384134062103d01900b0185208ca2082d7900901b01f580580ac10b804208520bc66884c8e3a52a04540b3112a106005523a011104b03a02604a9064383a8016879bcd40541aac1a8adc7e3a5ae08d2488c9e8f9786204c6b4119f1e8698b20dc7aff00cc189bac66f79f370000000049454e44ae426082"}]},"modalData":{"name":"kusama","version":"9130","meta_hash":"3e6bf025743e5cc550883170d91c8275fb238762b214922b41d64f9feba23987","meta_id_pic":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000035849444154789cedd9bd6d1b411086612a634ac080020706dc8155863b50038c5c8e2336a00e5c86dc8101070e041860ca8cde0fe408bbe7b9f966f6e74041f706ab6c67f6890ee2ddf97cdebcf71641381e8fd54376bbdd5dfa33b421082d8f668d40e98a30f2f1d37a627441a879fcf6f0339d65a7fd9774c6ea81d18450f378a401483510a805a31a610480b4344415422d001a89806a2042082d8f97462348110c37420f00b41402f242b81042000fdfd231e9f97b3a2e45110edb5fe92cdb9f3ea7d3970782223403484e080620f584e88760014804c20b2079219a10dc002888c0ea89802c8859841000ba71043407a1228401d01b40401a841be1d3fd633acb7ebf3ca5f35a10e1f0639bceb2fdd7533a2f4511e87ed75c085e00a91864411000c90bc100a462bf6b53088a600d908a411a84134062105e00a9d82f65224c0150cd10ab2802ab76bf1c624548bd226800a876c85cb7828004a23bc2fde3c77496bd3cfd49e7a52802bb2fba5f9e1b015983f201dac252beb805c100a4fc3eef7ed34208481b940fb01696f2c535082f8094dfc7f6d32a101880a7e8d2acdef7cd05881561450822b02fb7e8d20f9bbfe92c7bde7c48e7a5e87dec4b752e378206207921f2853500c90b91dfa7024804c2856001480c225fd8029018447e9f092019104310585104da8a905a1152b788c0be04a308ecbe45109005c100a47c710b820148f97d26840180dc084883f00248f9e21a841740caef532108000a21b0c24b937adf37d78a905a1152af088841d0df0e834bb32fc1e87d6c3f2d00a43f97ff27200b411b20e583acc5f3853500c90b91dfe7dd6f9a1bc11a20e583b4c5f3852d008941e4f745f7cb1b86c08a22b05af6fb0f0169102d43b46e054100d08a902a10d014223c847cb94511d8976a78bf540e802802b20615033400c909c100242f44b1df358a80bc10c5000b4022105e00894114fb5d9b022037022d88c08a22787323a030c41b40d000d02c020a41dc38c21c003211901b2288c07e3bec896001a07e08c88220009217c20b809a11503384134062103d01900b0185208ca2082d7900901b01f580580ac10b804208520bc66884c8e3a52a04540b3112a106005523a011104b03a02604a9064383a8016879bcd40541aac1a8adc7e3a5ae08d2488c9e8f9786204c6b4119f1e8698b20dc7aff00cc189bac66f79f370000000049454e44ae426082","networks":[{"title":"Kusama","logo":"kusama","order":1,"current_on_screen":true}]},"alertData":{}}"##;
        assert!(real_json == expected_json, "ManageMetadata on NetworkDetails screen for kusama sr25519 key. Expected NetworkDetails screen for kusama with ManageMetadata modal, got:\n{}", real_json);
        
        let real_json = do_action("SignMetadata","","");
        let expected_json = r#"{"screen":"SignSufficientCrypto","screenLabel":"Sign SufficientCrypto","back":true,"footer":false,"footerButton":"Settings","rightButton":"None","screenNameType":"h1","modal":"Empty","alert":"Empty","screenData":{"identities":[]},"modalData":{},"alertData":{}}"#;
        assert!(real_json == expected_json, "SignMetadata on NetworkDetails screen for kusama sr25519 key with ManageMetadata modal for version 9130. Expected SignSufficientCrypto screen for kusama9130 metadata with no modals, got:\n{}", real_json);
        
        let real_json = do_action("GoBack","","");
        assert!(real_json == kusama_json, "GoBack on SignSufficientCrypto screen. Expected NetworkDetails screen with no modals, got:\n{}", real_json);
        
        do_action("ManageMetadata","9130","");
        let real_json = do_action("RemoveMetadata","","");
        let expected_json = r##"{"screen":"NetworkDetails","screenLabel":"Network details","back":true,"footer":false,"footerButton":"Settings","rightButton":"NDMenu","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"base58prefix":"2","color":"#000","decimals":"12","encryption":"sr25519","genesis_hash":"b0a8d493285c2df73290dfb7e61f870f17b41801197a149ca93654499ea3dafe","logo":"kusama","name":"kusama","order":"1","path_id":"//kusama","secondary_color":"#262626","title":"Kusama","unit":"KSM","current_verifier":{"type":"general","details":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"}},"meta":[]},"modalData":{},"alertData":{}}"##;
        assert!(real_json == expected_json, "RemoveMetadata on ManageNetworks screen with kusama sr25519 key with ManageMetadata modal for version 9130. Expected updated NetworkDetails screen for kusama with no modals, got:\n{}", real_json);
        
        kusama_json = real_json;
        
        let real_json = do_action("RightButton","","");
        let expected_json = r##"{"screen":"NetworkDetails","screenLabel":"Network details","back":true,"footer":false,"footerButton":"Settings","rightButton":"NDMenu","screenNameType":"h4","modal":"NetworkDetailsMenu","alert":"Empty","screenData":{"base58prefix":"2","color":"#000","decimals":"12","encryption":"sr25519","genesis_hash":"b0a8d493285c2df73290dfb7e61f870f17b41801197a149ca93654499ea3dafe","logo":"kusama","name":"kusama","order":"1","path_id":"//kusama","secondary_color":"#262626","title":"Kusama","unit":"KSM","current_verifier":{"type":"general","details":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"}},"meta":[]},"modalData":{},"alertData":{}}"##;
        assert!(real_json == expected_json, "RightButton on NetworkDetails screen for kusama sr25519 key. Expected NetworkDetails screen for kusama with NetworkDetailsMenu modal, got:\n{}", real_json);
        
        let real_json = do_action("SignNetworkSpecs","","");
        let expected_json = r#"{"screen":"SignSufficientCrypto","screenLabel":"Sign SufficientCrypto","back":true,"footer":false,"footerButton":"Settings","rightButton":"None","screenNameType":"h1","modal":"Empty","alert":"Empty","screenData":{"identities":[]},"modalData":{},"alertData":{}}"#;
        assert!(real_json == expected_json, "SignNetworkSpecs on NetworkDetails screen for kusama sr25519 key with NetworkDetailsMenu modal. Expected SignSufficientCrypto screen for kusama specs with no modals, got:\n{}", real_json);
        
        let real_json = do_action("GoBack","","");
        assert!(real_json == kusama_json, "GoBack on SignSufficientCrypto screen. Expected NetworkDetails screen with no modals, got:\n{}", real_json);
        
        do_action("RightButton","","");
        let real_json = do_action("RemoveNetwork","","");
        let expected_json = r#"{"screen":"ManageNetworks","screenLabel":"MANAGE NETWORKS","back":true,"footer":false,"footerButton":"Settings","rightButton":"TypesInfo","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"networks":[{"key":"018091b171bb158e2d3848fa23a9f1c25182fb8e20313b2c1eb49219da7a70ce90c3","title":"Polkadot","logo":"polkadot","order":0},{"key":"0180e143f23803ac50e8f6f8e62695d1ce9e4e1d68aa36c1cd2cfd15340213f3423e","title":"Westend","logo":"westend","order":1}]},"modalData":{},"alertData":{}}"#;
        assert!(real_json == expected_json, "RemoveNetwork on NetworkDetails screen for kusama sr25519. Expected updated ManageNetworks screen with no modals, got:\n{}", real_json);
        
        let real_json = do_action("RightButton","","");
        let expected_json = r#"{"screen":"ManageNetworks","screenLabel":"MANAGE NETWORKS","back":true,"footer":false,"footerButton":"Settings","rightButton":"TypesInfo","screenNameType":"h4","modal":"TypesInfo","alert":"Empty","screenData":{"networks":[{"key":"018091b171bb158e2d3848fa23a9f1c25182fb8e20313b2c1eb49219da7a70ce90c3","title":"Polkadot","logo":"polkadot","order":0},{"key":"0180e143f23803ac50e8f6f8e62695d1ce9e4e1d68aa36c1cd2cfd15340213f3423e","title":"Westend","logo":"westend","order":1}]},"modalData":{"types_on_file":true,"types_hash":"d091a5a24a97e18dfe298b167d8fd5a2add10098c8792cba21c39029a9ee0aeb","types_id_pic":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000035549444154789cedd8dd89144114c57117049fdb140cc18c8c61c3d818ccc8104cc17e1684b50ec35dcfd4debe1f55b79a01fbff30fb304dd5e91f2cac3ebdbebe7ef8df3b0561dff7e14bb66d7b6a3f96b60461e6a5bd56a09422ac7cf9be4a8c12849197fffce55bfbbcefd7cfefed335705c614c2c8cb230d401a81403318c3082b00a4b32186104601d04a043402914298797969358294c108235400a0b310501422849001d87ebcb4cffbf6afcfedf35616c13bcf2b02e122cc02483cdc82f000243ecfcb832843b0064b3c5c838802487c9ed514421400558e46e5e7191087081900543ebaf83c7404a122640150f5e8eaf3240d228c50fd3bfc697bfffceffddff7d9f3bc7d5208210a20f145d6701eac014851083e2fba4fea215c04eb02892fd286f3600b40f220f8bcec3e6422f40068e412ab2c82d7e83e86b8105a6f081a001abde4a847414002518ea0bd24bf94f67d9ff73c7f9fddc785119075115fa00d967878f573d17d7d2904a45dc4175883251eae3def7ddfc7cf7bfbb4ee103c8048d9d15ed5e71d05880be1424822787fb965477f7cd9dae77d7f9ef7f6792b7b9eb7efa830827681c41759c379b006204521f8bce83ead10827581c41769c379b0052079107c5e765fdf1204af2c82d7ecbe0ba17521b4962078bfc35904efbcecbebe1002b22ee20bb4c1120fb7203c0089cf8beed30a2320ed22bec01a2cf1700d220a20f179debea352085ed9d15ed5e71d7521b42e84d61b02f220bc7faf67476bcf7bdff7f1f3de3e2d00b41fb7ff4f4016827681c41759c37970f573d17d7d6104eb02892fd286f360edfb3eef79fe3ebb8f5b86e0a5bd541fbfa4d7ccbe7708488398b944eb511004005d08ad3b04d443642ff1fe72cb2278e765f72106402e02b22ee20bb4c1120fb7203c0089cf8bee935c041485e00bacc1120fd720a200129fe7ed937a001446f0ca8ef6aa3e4f0a23a02c44f5e8eaf39006800e115006a27a74f9790700c844405188ec68ef77387b9e950580ca1090359c076b00521482cff39a4640b3103cd802903c083ecfcb034021049481b0ca22cc140140610454017116421400a510a4198cd5089997978610d028c44a841100348c8056409c0d80a610a4110c0d620460e6e5a51204690463b48a97974a11a49518952f2f2d41e89b4159f1d27da7203c7a7f01d20cbfac205d21400000000049454e44ae426082"},"alertData":{}}"#;
        assert!(real_json == expected_json, "RightButton on ManageNetworks screen. Expected ManageNetworks screen with TypesInfo modal, got:\n{}", real_json);
        
        let real_json = do_action("SignTypes","","");
        let expected_json = r#"{"screen":"SignSufficientCrypto","screenLabel":"Sign SufficientCrypto","back":true,"footer":false,"footerButton":"Settings","rightButton":"None","screenNameType":"h1","modal":"Empty","alert":"Empty","screenData":{"identities":[]},"modalData":{},"alertData":{}}"#;
        assert!(real_json == expected_json, "SignTypes on ManageNetworks screen with TypesInfo modal. Expected SignSufficientCrypto screen for types with no modals, got:\n{}", real_json);
        
        let real_json = do_action("GoBack","","");
        assert!(real_json == current_settings_json, "GoBack on SignSufficientCrypto screen. Expected Settings screen with no modals, got:\n{}", real_json);
        
        do_action("ManageNetworks","","");
        do_action("RightButton","","");
        let real_json = do_action("RemoveTypes","","");
        let cut_real_json = timeless(&real_json);
        let expected_json = r##"{"screen":"Log","screenLabel":"","back":false,"footer":true,"footerButton":"Log","rightButton":"LogRight","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"log":[{"order":3,"timestamp":"**","events":[{"event":"types_removed","payload":{"types_hash":"d091a5a24a97e18dfe298b167d8fd5a2add10098c8792cba21c39029a9ee0aeb","types_id_pic":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000035549444154789cedd8dd89144114c57117049fdb140cc18c8c61c3d818ccc8104cc17e1684b50ec35dcfd4debe1f55b79a01fbff30fb304dd5e91f2cac3ebdbebe7ef8df3b0561dff7e14bb66d7b6a3f96b60461e6a5bd56a09422ac7cf9be4a8c12849197fffce55bfbbcefd7cfefed335705c614c2c8cb230d401a81403318c3082b00a4b32186104601d04a043402914298797969358294c108235400a0b310501422849001d87ebcb4cffbf6afcfedf35616c13bcf2b02e122cc02483cdc82f000243ecfcb832843b0064b3c5c838802487c9ed514421400558e46e5e7191087081900543ebaf83c7404a122640150f5e8eaf3240d228c50fd3bfc697bfffceffddff7d9f3bc7d5208210a20f145d6701eac014851083e2fba4fea215c04eb02892fd286f3600b40f220f8bcec3e6422f40068e412ab2c82d7e83e86b8105a6f081a001abde4a847414002518ea0bd24bf94f67d9ff73c7f9fddc785119075115fa00d967878f573d17d7d2904a45dc4175883251eae3def7ddfc7cf7bfbb4ee103c8048d9d15ed5e71d05880be1424822787fb965477f7cd9dae77d7f9ef7f6792b7b9eb7efa830827681c41759c379b006204521f8bce83ead10827581c41769c379b0052079107c5e765fdf1204af2c82d7ecbe0ba17521b4962078bfc35904efbcecbebe1002b22ee20bb4c1120fb7203c0089cf8beed30a2320ed22bec01a2cf1700d220a20f179debea352085ed9d15ed5e71d7521b42e84d61b02f220bc7faf67476bcf7bdff7f1f3de3e2d00b41fb7ff4f4016827681c41759c37970f573d17d7d6104eb02892fd286f360edfb3eef79fe3ebb8f5b86e0a5bd541fbfa4d7ccbe7708488398b944eb511004005d08ad3b04d443642ff1fe72cb2278e765f72106402e02b22ee20bb4c1120fb7203c0089cf8bee935c041485e00bacc1120fd720a200129fe7ed937a001446f0ca8ef6aa3e4f0a23a02c44f5e8eaf39006800e115006a27a74f9790700c844405188ec68ef77387b9e950580ca1090359c076b00521482cff39a4640b3103cd802903c083ecfcb034021049481b0ca22cc140140610454017116421400a510a4198cd5089997978610d028c44a841100348c8056409c0d80a610a4110c0d620460e6e5a51204690463b48a97974a11a49518952f2f2d41e89b4159f1d27da7203c7a7f01d20cbfac205d21400000000049454e44ae426082","verifier":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"}}}]},{"order":2,"timestamp":"**","events":[{"event":"network_removed","payload":{"base58prefix":"2","color":"#000","decimals":"12","encryption":"sr25519","genesis_hash":"b0a8d493285c2df73290dfb7e61f870f17b41801197a149ca93654499ea3dafe","logo":"kusama","name":"kusama","order":"1","path_id":"//kusama","secondary_color":"#262626","title":"Kusama","unit":"KSM","current_verifier":{"type":"general","details":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"}}}}]},{"order":1,"timestamp":"**","events":[{"event":"metadata_removed","payload":{"specname":"kusama","spec_version":"9130","meta_hash":"3e6bf025743e5cc550883170d91c8275fb238762b214922b41d64f9feba23987","meta_id_pic":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000035849444154789cedd9bd6d1b411086612a634ac080020706dc8155863b50038c5c8e2336a00e5c86dc8101070e041860ca8cde0fe408bbe7b9f966f6e74041f706ab6c67f6890ee2ddf97cdebcf71641381e8fd54376bbdd5dfa33b421082d8f668d40e98a30f2f1d37a627441a879fcf6f0339d65a7fd9774c6ea81d18450f378a401483510a805a31a610480b4344415422d001a89806a2042082d8f97462348110c37420f00b41402f242b81042000fdfd231e9f97b3a2e45110edb5fe92cdb9f3ea7d3970782223403484e080620f584e88760014804c20b2079219a10dc002888c0ea89802c8859841000ba71043407a1228401d01b40401a841be1d3fd633acb7ebf3ca5f35a10e1f0639bceb2fdd7533a2f4511e87ed75c085e00a91864411000c90bc100a462bf6b53088a600d908a411a84134062105e00a9d82f65224c0150cd10ab2802ab76bf1c624548bd226800a876c85cb7828004a23bc2fde3c77496bd3cfd49e7a52802bb2fba5f9e1b015983f201dac252beb805c100a4fc3eef7ed34208481b940fb01696f2c535082f8094dfc7f6d32a101880a7e8d2acdef7cd05881561450822b02fb7e8d20f9bbfe92c7bde7c48e7a5e87dec4b752e378206207921f2853500c90b91dfa7024804c2856001480c225fd8029018447e9f092019104310585104da8a905a1152b788c0be04a308ecbe45109005c100a47c710b820148f97d26840180dc084883f00248f9e21a841740caef532108000a21b0c24b937adf37d78a905a1152af088841d0df0e834bb32fc1e87d6c3f2d00a43f97ff27200b411b20e583acc5f3853500c90b91dfe7dd6f9a1bc11a20e583b4c5f3852d008941e4f745f7cb1b86c08a22b05af6fb0f0169102d43b46e054100d08a902a10d014223c847cb94511d8976a78bf540e802802b20615033400c909c100242f44b1df358a80bc10c5000b4022105e00894114fb5d9b022037022d88c08a22787323a030c41b40d000d02c020a41dc38c21c003211901b2288c07e3bec896001a07e08c88220009217c20b809a11503384134062103d01900b0185208ca2082d7900901b01f580580ac10b804208520bc66884c8e3a52a04540b3112a106005523a011104b03a02604a9064383a8016879bcd40541aac1a8adc7e3a5ae08d2488c9e8f9786204c6b4119f1e8698b20dc7aff00cc189bac66f79f370000000049454e44ae426082"}}]},{"order":0,"timestamp":"**","events":[{"event":"history_cleared"}]}],"total_entries":4},"modalData":{},"alertData":{}}"##;
        assert!(cut_real_json == expected_json, "RemoveTypes on ManageNetworks screen with TypesInfo modal. Expected Log screen with no modals, got:\n{}", real_json);
        
        current_log_json = real_json;
        
        let real_json = do_action("ShowLogDetails","2","");
        let cut_real_json = timeless(&real_json);
        let expected_json = r##"{"screen":"LogDetails","screenLabel":"Event details","back":true,"footer":true,"footerButton":"Log","rightButton":"None","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"timestamp":"**","events":[{"event":"network_removed","payload":{"base58prefix":"2","color":"#000","decimals":"12","encryption":"sr25519","genesis_hash":"b0a8d493285c2df73290dfb7e61f870f17b41801197a149ca93654499ea3dafe","logo":"kusama","name":"kusama","order":"1","path_id":"//kusama","secondary_color":"#262626","title":"Kusama","unit":"KSM","current_verifier":{"type":"general","details":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"}}}}]},"modalData":{},"alertData":{}}"##;
        assert!(cut_real_json == expected_json, "ShowLogDetails on Log screen with order 2. Expected LogDetails screen with no modals, got:\n{}", real_json);
        
        let real_json = do_action("GoBack","","");
        assert!(real_json == current_log_json, "GoBack on ShowLogDetails screen. Expected Log screen with no modals, got:\n{}", real_json);
        
        do_action("RightButton","","");
        let real_json = do_action("ClearLog","","");
        let cut_real_json = timeless(&real_json);
        let expected_json = r#"{"screen":"Log","screenLabel":"","back":false,"footer":true,"footerButton":"Log","rightButton":"LogRight","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"log":[{"order":0,"timestamp":"**","events":[{"event":"history_cleared"}]}],"total_entries":1},"modalData":{},"alertData":{}}"#;
        assert!(cut_real_json == expected_json, "ClearLog on Log screen with LogRight modal. Expected updated Log screen with no modals, got:\n{}", real_json);
        
        let real_json = do_action("NavbarScan","","");
        let expected_json = r#"{"screen":"Scan","screenLabel":"","back":false,"footer":true,"footerButton":"Scan","rightButton":"None","screenNameType":"h1","modal":"Empty","alert":"Empty","screenData":{},"modalData":{},"alertData":{}}"#;
        assert!(real_json == expected_json, "NavbarScan on Log screen. Expected Scan screen with no modals, got:\n{}", real_json);
        
        let scan_json = real_json;
        
        let real_json = do_action("TransactionFetched",&std::fs::read_to_string("for_tests/add_specs_kusama-sr25519_Alice-sr25519.txt").unwrap().trim(),"");
        let expected_json = r##"{"screen":"Transaction","screenLabel":"","back":true,"footer":false,"footerButton":"Scan","rightButton":"None","screenNameType":"h1","modal":"Empty","alert":"Empty","screenData":{"content":{"verifier":[{"index":0,"indent":0,"type":"verifier","payload":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"}}],"new_specs":[{"index":1,"indent":0,"type":"new_specs","payload":{"base58prefix":"2","color":"#000","decimals":"12","encryption":"sr25519","genesis_hash":"b0a8d493285c2df73290dfb7e61f870f17b41801197a149ca93654499ea3dafe","logo":"kusama","name":"kusama","path_id":"//kusama","secondary_color":"#262626","title":"Kusama","unit":"KSM"}}]},"type":"stub"},"modalData":{},"alertData":{}}"##;
        assert!(real_json == expected_json, "TransactionFetched on Scan screen with add_specs info for kusama. Expected Transaction screen with no modals, got:\n{}", real_json);
        
        let real_json = do_action("GoBack","","");
        assert!(real_json == scan_json, "GoBack on Transaction screen. Expected Scan screen with no modals, got:\n{}", real_json);
        
        do_action("TransactionFetched",&std::fs::read_to_string("for_tests/add_specs_kusama-sr25519_Alice-sr25519.txt").unwrap().trim(),"");
        let real_json = do_action("GoForward","","");
        let cut_real_json = timeless(&real_json);
        let expected_json = r##"{"screen":"Log","screenLabel":"","back":false,"footer":true,"footerButton":"Log","rightButton":"LogRight","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"log":[{"order":1,"timestamp":"**","events":[{"event":"network_specs_added","payload":{"base58prefix":"2","color":"#000","decimals":"12","encryption":"sr25519","genesis_hash":"b0a8d493285c2df73290dfb7e61f870f17b41801197a149ca93654499ea3dafe","logo":"kusama","name":"kusama","order":"2","path_id":"//kusama","secondary_color":"#262626","title":"Kusama","unit":"KSM","current_verifier":{"type":"general","details":{"hex":"d43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d","identicon":"89504e470d0a1a0a0000000d49484452000000410000004108060000008ef7c9450000030e49444154789cedda4d6a544114c571330e0eb286640782d8ee4090081964033d105c90e0a0379041c020b8035b047790aca10792715b87e644eb59afeeb9f5f1e86edf7f70320cf7075d83a44fb6dbedb3ffbd4910369b4df12f393b3b3b093fbad605a1e668ab1e284d117a1e3fac2546138492e3bf3ede868d7b737a15d6570b8c2a8492e3510a809540a01a8c62841e006c6a8822845200d413019540b8106a8e67bd1198074346680180a642402a8484e001f8717d1f36eee5cd45d85d5e842ff7d761e3de5edc84d552204c845a00a6425800ac254433841c00b3205400a6425421a800c88b60d51201e52046113c0068df11d0184412c10b800e0101a5206484d5e243d8b8e5fa63d85d5e84cbd7e761e3eebe3d84dde54558ac5661e3d6cb65d838094105602a8405c054080b80291026420e8059102a00b32054003684c8220c019017c1ca8b60558280fe869811424f08290074ac088810cd113e25de84f7156fc2cfc49bf0a2f24d603202ca4158004c85b000980a3106805c082805a102300b42056016440e00450816809217c1ca8b501a20668419c189f0ebf6316cdcf3abd3b0bbbc08ef16ff7e863fafff7c86bd08af2ecfc3c67dbf7b089b4f4648013015c202602a8405c02c08092107c02c08158059102a00cb417441b0f22258cd08a11921b4970847f926a01c8405c054080b80a91039002423a014840ac02c081580591016007221587911acbc08a5cd08a11921f484802c88a3ff7b02ca21a400980a61013015c202603908192107c02c08158059102a001b83e88660e545b06a8a805210c78a400034238422043484f0221cfcff22d11001e5202c00a64258004c851802201301a9102a00b3205400664128004846b0f222587911d46404e48538048414001a45401e887d471803405904a44278110ee67b8c48454039080b80a9102a00aa4640b5102a00b3205a0220090179207279116a5200908c805a404c85a002201702abc1e88de0399e1521a052889e082500a81801f580981a005521b0128c14440940cdf1ac09022bc128adc5f1ac2902eb89d1f278d60561580d4a8fa3874d82b0effd06a580bfac7347ad900000000049454e44ae426082","encryption":"sr25519"}}}}]},{"order":0,"timestamp":"**","events":[{"event":"history_cleared"}]}],"total_entries":2},"modalData":{},"alertData":{}}"##;
        assert!(cut_real_json == expected_json, "GoForward on Transaction screen with stub. Expected Log screen with no modals, got:\n{}", real_json);
        
/*        
        let current_log_json = real_json;
        
        let real_json = do_action("SelectSeed","","");
        let expected_json = r#"{"screen":"Keys","screenLabel":"","back":true,"footer":true,"footerButton":"Keys","rightButton":"Backup","screenNameType":"h4","modal":"Empty","alert":"Empty","screenData":{"root":{"seed_name":"","identicon":"","address_key":"","base58":"","swiped":false,"multiselect":false},"set":[],"network":{"title":"Polkadot","logo":"polkadot"},"multiselect_mode":false,"multiselect_count":""},"modalData":{},"alertData":{}}"#;
        assert!(real_json == expected_json, "Different navstate json:\n{}", real_json);
*/        
        fs::remove_dir_all(dbname).unwrap();
    }
    
}
